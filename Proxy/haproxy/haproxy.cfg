global
    log 127.0.0.1 local0 info  # Log to localhost (modify if needed)
    maxconn 4000                # Maximum number of concurrent connections

defaults
    mode http
    option httplog
    option dontlognull
    timeout connect 5s
    timeout client 30s
    timeout server 30s
    retries 3

frontend http_frontend
    bind *:8100                   # Listen on port 8100
    default_backend app_backend  # Default backend to forward requests

backend app_backend
    balance roundrobin            # Round-robin load balancing
    option httpchk              # Enable health checks

    # Use service names from Docker Compose (replace with your service names)
    server app1 app1:80 weight 2  # Server 1 with weight 1
    server app2 app2:80 weight 1
